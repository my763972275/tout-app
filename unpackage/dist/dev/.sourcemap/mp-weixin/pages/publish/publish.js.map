{"version":3,"sources":["webpack:///D:/test/mobile/tour-app/main.js","webpack:///D:/test/mobile/tour-app/pages/publish/publish.vue?3544","webpack:///D:/test/mobile/tour-app/pages/publish/publish.vue?d0a7","webpack:///D:/test/mobile/tour-app/pages/publish/publish.vue?fd89","webpack:///D:/test/mobile/tour-app/pages/publish/publish.vue?1268","webpack:///D:/test/mobile/tour-app/pages/publish/publish.vue","webpack:///D:/test/mobile/tour-app/pages/publish/publish.vue?3e96","webpack:///D:/test/mobile/tour-app/pages/publish/publish.vue?88e4"],"names":["createPage","Page","name","components","HMmessages","Modal","data","num","address","titledata","tipsdata","topimg","videos","uploadvideos","avatarUrl","nickName","openid","fication","formData","created","getLocation","methods","menubtn","index","preImg","uploadImg","wx","showLoading","title","icon","uni","chooseImage","count","sizeType","sourceType","success","res","hideLoading","tempFilePaths","uploadVideo","self","chooseVideo","maxDuration","tempFilePath","deleteImg","splice","deleteVideo","then","result","ad_info","city","catch","err","console","log","publishContext","show","iconColor","fontColor","background","mask","userInfo","length","message","$nextTick","$refs","modal","init","_openid","userdata","staticImg","staticimg","staticVideo","staticvideo","users","classifydata","content","album","video","time","$store","commit","switchTab","url","imgFileID","Promise","resolve","reject","forEach","item","imgion","lastIndexOf","eximg","slice","cloudpath","Date","now","Math","floor","random","push","videoion","exvideo","videopath"],"mappings":"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","file":"pages/publish/publish.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/publish/publish.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./publish.vue?vue&type=template&id=06caa9ff&scoped=true&\"\nvar renderjs\nimport script from \"./publish.vue?vue&type=script&lang=js&\"\nexport * from \"./publish.vue?vue&type=script&lang=js&\"\nimport style0 from \"./publish.vue?vue&type=style&index=0&id=06caa9ff&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06caa9ff\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"test/mobile/tour-app/pages/publish/publish.vue\"\nexport default component.exports","export * from \"-!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=template&id=06caa9ff&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.HMmessages = _vm.$refs.HMmessages\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { previewImg,timer } from '../../commons/js/common.js';\nimport {mapState} from 'vuex';\nimport {locationData} from '../../commons/js/list.js';\nimport HMmessages from \"@/element/HM-messages/HM-messages.vue\"\nimport Modal from '../../element/modal.vue';\nimport {home,addDatabase,uploadFiles} from '../../commons/js/cloudFun.js'\nexport default {\n\tname:'travels',\n\tcomponents:{\n\t\tHMmessages,\n\t\tModal\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tnum:0,\n\t\t\taddress:'',\n\t\t\ttitledata:'',\n\t\t\ttipsdata:'',\n\t\t\ttopimg:[],\n\t\t\tvideos:'',\n\t\t\tuploadvideos:false,\n\t\t\tavatarUrl:'',\n\t\t\tnickName:'',\n\t\t\topenid:'',\n\t\t\tfication:[\n\t\t\t\t{\n\t\t\t\t\tname:\"景点\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname:\"美食\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname:\"网红打卡\"\n\t\t\t\t}\n\t\t\t],\n\t\t\tformData:{}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.getLocation()\n\t},\n\tmethods: {\n\t\tmenubtn(index){\n\t\t\tthis.num = index\n\t\t},\n\t\t// 图片预览\n\t\tpreImg(index){\n\t\t\t// 预览图片\n\t\t\tpreviewImg(this.topimg,index)\n\t\t},\n\t\t// 上传图片\n\t\tuploadImg(){\n\t\t\twx.showLoading({\n\t\t\t\ttitle:'上传中',\n\t\t\t\ticon:'../../static/loading.svg'\n\t\t\t})\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 6, //默认9\n\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\tsourceType: ['album'], //从相册选择\n\t\t\t\tsuccess: res => {\n\t\t\t\t wx.hideLoading();\n\t\t\t\t this.topimg = [...this.topimg,...res.tempFilePaths];\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 上传视频\n\t\tuploadVideo(){\n\t\t\tvar self = this;\n\t\t\twx.showLoading({\n\t\t\t\ttitle:'上传中',\n\t\t\t\ticon:'../../static/loading.svg'\n\t\t\t})\n\t\t\tuni.chooseVideo({\n\t\t\t\tcount: 1,\n\t\t\t\tmaxDuration:20,\n\t\t\t\tsourceType: ['camera', 'album'],\n\t\t\t\tsuccess: function (res) {\n\t\t\t\t\twx.hideLoading();\n\t\t\t\t\tself.uploadvideos = true;\n\t\t\t\t\tself.videos = res.tempFilePath;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 删除图片\n\t\tdeleteImg(index){\n\t\t\tthis.topimg.splice(index,1);\n\t\t},\n\t\t// 删除视频\n\t\tdeleteVideo(){\n\t\t\tthis.videos = '';\n\t\t\tthis.uploadvideos = false;\n\t\t},\n\t\t// 获取当前位置\n\t\tgetLocation(){\n\t\t\tlocationData()\n\t\t\t.then(res => {\n\t\t\t\tthis.address = res.result.ad_info.city\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t\t// this.addressVal = '无锡市'\n\t\t\t})\n\t\t},\n\t\t// 必填项校验提示\n\t\tpublishContext(){\n\t\t\tif(this.titledata == ''){\n\t\t\t\tthis.HMmessages.show('标题必填',{icon:'error',iconColor:'white',fontColor:'white',background:\"rgba(255,0,51,0.8)\"})\n\t\t\t}else if(this.tipsdata == ''){\n\t\t\t\tthis.HMmessages.show('描述必填',{icon:'error',iconColor:'white',fontColor:'white',background:\"rgba(255,0,51,0.8)\"})\n\t\t\t}else{\n\t\t\t\twx.showLoading({\n\t\t\t\t\ttitle:'发布中',\n\t\t\t\t\tmask:true\n\t\t\t\t})\n\t\t\t\tthis.userInfo()\n\t\t\t}\n\t\t},\n\t\t// 判断用户是否登录\n\t\tuserInfo(){\n\t\t\t// 请求数据库查看用户是否存在，存在就是登录，反之未登录\n\t\t\thome('user')\n\t\t\t.then(res => {\n\t\t\t\t// 用户没有登录\n\t\t\t\tif(res.length == 0){\n\t\t\t\t\tlet message = '请登陆后再操作'\n\t\t\t\t\t// dom更新循环结束之后的延迟回调\n\t\t\t\t\tthis.$nextTick(() =>{\n\t\t\t\t\t\tthis.$refs.modal.init(message)\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\tthis.avatarUrl = res[0].avatarUrl;\n\t\t\t\t\tthis.nickName = res[0].nickName;\n\t\t\t\t\tthis.openid = res[0]._openid;\n\t\t\t\t\tthis.userdata()\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t},\n\t\t// 用户上传数据到数据库 1.先上传图片到云存储 2.上传视频到云存储 3.上传所有数据到数据库\n\t\tasync userdata(){\n\t\t\t// 先将图片上传到云存储\n\t\t\tlet staticimg = await this.staticImg();\n\t\t\t// 将视频上传到云存储\n\t\t\tif(this.videos != ''){\n\t\t\t\tvar staticvideo = await this.staticVideo();\n\t\t\t}\n\t\t\t\n\t\t\tlet users = {\n\t\t\t\tclassifydata:this.fication[this.num].name,\n\t\t\t\ttitle:this.titledata,\n\t\t\t\tcontent:this.tipsdata,\n\t\t\t\talbum:staticimg,\n\t\t\t\tvideo:staticvideo,\n\t\t\t\taddress:this.address,\n\t\t\t\tavatarUrl:this.avatarUrl,\n\t\t\t\tnickName:this.nickName,\n\t\t\t\topenid:this.openid,\n\t\t\t\ttime:timer()\n\t\t\t}\n\t\t\t// 上传参数到云数据库\n\t\t\taddDatabase(users,'publish')\n\t\t\t.then(res => {\n\t\t\t\tthis.$store.commit('routmuta',true)\n\t\t\t    wx.hideLoading();\n\t\t\t\tthis.HMmessages.show('发布成功',{icon:'success',iconColor:'black',fontColor:'black',background:\"rgba(0,255,20,0.8)\"})\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl:'../strategy/strategy'\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t},\n\t\t// 上传图片到云数据库\n\t\tstaticImg(){\n\t\t\t// 把上传成功返回的图片放到数组里\n\t\t\tvar imgFileID = []\n\t\t\treturn new Promise((resolve,reject) => {\n\t\t\t\tthis.topimg.forEach(item => {\n\t\t\t\t\t// 随机字符串拼接，防止图片url被重名覆盖\n\t\t\t\t\tlet imgion = item.lastIndexOf('.')\n\t\t\t\t\tlet eximg = item.slice(imgion);\n\t\t\t\t\tlet cloudpath =  Date.now() + Math.floor(Math.random(0,1) * 10000000) + eximg;\n\t\t\t\t\tuploadFiles(cloudpath,item,'static')\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\timgFileID.push(res);\n\t\t\t\t\t\t// 判断云存储返回的图片是否和用户上传的图片一样多\n\t\t\t\t\t\tif(imgFileID.length == this.topimg.length){\n\t\t\t\t\t\t\tresolve(imgFileID)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\treject(err)\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t// 上传视频到云数据库\n\t\tstaticVideo(){\n\t\t\treturn new Promise((resolve,reject) => {\n\t\t\t\tlet videoion = this.videos.lastIndexOf('.')\n\t\t\t\tlet exvideo = this.videos.slice(videoion);\n\t\t\t\tlet videopath =  Date.now() + Math.floor(Math.random(0,1) * 10000000) + exvideo;\n\t\t\t\t\tuploadFiles(videopath,this.videos,'videos')\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tresolve(res)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\treject(err)\n\t\t\t\t\t})\n\t\t\t\t\n\t\t\t})\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-2!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=style&index=0&id=06caa9ff&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-2!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=style&index=0&id=06caa9ff&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1601345330576\n      var cssReload = require(\"D:/software/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}